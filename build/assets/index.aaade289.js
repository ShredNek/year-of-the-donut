var A=Object.defineProperty;var T=(n,t,o)=>t in n?A(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var y=(n,t,o)=>(T(n,typeof t!="symbol"?t+"":t,o),o);import{r as h,R as O}from"./react.b19ff3b0.js";import{R as x,c as R}from"./react-dom.a68b0a21.js";import{j as s,F as C,a as e,T as k}from"./react-icons.f04d1c3e.js";import{E as P}from"./jspdf.b2f55dd3.js";import{a as $}from"./jspdf-autotable.48487f48.js";import{a as S}from"./axios.754b77ca.js";import"./core-js.b4887061.js";import"./scheduler.415b767f.js";import"./@babel.2898e469.js";import"./fflate.fca59393.js";import"./form-data.2b153385.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();const Y=n=>{let t=n.getHours(),o=n.getMinutes();const l=t>=12?"pm":"am";return t%=12,t=t||12,o=o<10?`0${o}`:o,`${t}:${o} ${l}`},M=n=>{const t=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),l=n.getFullYear();return t+"/"+o+"/"+l};function F(n){const t=new P;return $(t,{body:[[{content:`This is your story of ${new Date().getFullYear()}!`,styles:{halign:"center",fontSize:30,textColor:"white",fontStyle:"bold"}}]],theme:"plain",styles:{fillColor:"rgb(233, 206, 97)"}}),n.map(o=>{$(t,{body:[[{content:`${b[o.childNumber]}:`,styles:{halign:"center",valign:"middle",fontSize:12,textColor:"white",fontStyle:"bold",fillColor:"rgb(82, 203, 255)",minCellHeight:12,cellWidth:30}},{content:"",styles:{cellWidth:10}},{content:`${o.description}`,styles:{halign:"left",valign:"middle",fontSize:9,textColor:"black",fontStyle:"italic",cellWidth:125}}]],theme:"plain"})}),$(t,{body:[[{content:`Created uisng Daniel Lee's TimeCount at ${Y(new Date)}, on the ${M(new Date)} `,styles:{halign:"center"}}]]}),t.save(`YourYear_${new Date().getFullYear()}_${M(new Date)}`)}const L=({isOpen:n,onClose:t,allData:o})=>{const l=a=>{t(a)};return x.createPortal(s(C,{children:[s("div",{className:`year-data-modal__interface--${n}`,children:[e("button",{className:"year-data-modal__close-button",onClick:l,children:e(k,{})}),s("h2",{className:"year-data-modal__title",children:["Your story of ",new Date().getFullYear()]}),e("div",{className:"year-data-modal__month-details",children:o.length===12?o.map(a=>s("div",{children:[e("h3",{children:b[a.childNumber]}),e("p",{children:a.description})]})):""}),s("button",{className:"year-data-modal__download-button",onClick:()=>{F(o)},children:["Download your ",new Date().getFullYear()]})]}),e("div",{className:`year-data-modal__overlay--${n}`})]}),document.getElementById("year-data-portal-root"))};class B{constructor(){y(this,"segmentState","active");y(this,"description");y(this,"childNumber")}}const I=({doughnutSegmentChildNumber:n,isOpen:t,onClose:o})=>{const l=h.exports.useRef(null);let a=new B;const i=d=>{d.preventDefault(),o(d)},m=async d=>{if(location.reload(),a.description=l.current.value,a.childNumber=n,l.current.value==="")return window.alert("Looks like didn't input any data! Try again");console.log(`Apparently we have: ${Object.entries(a)}`),S.post("http://localhost:3001",a).catch(g=>console.log(g)).then(g=>console.log(g)),o(d)};return x.createPortal(s(C,{children:[s("div",{className:`create-modal__interface--${t}`,children:[e("button",{className:"create-modal__close-button",onClick:i,children:e(k,{})}),e("h2",{className:"create-modal__title",children:b[n]}),s("form",{className:"create-modal__form-details",children:[e("h3",{className:"create-modal__form-details__form-heading",children:"So, what did we do on this month?"}),e("textarea",{required:!0,className:"create-modal__form-details__textarea",ref:l})]}),e("button",{className:"create-modal__submit-button",onClick:m,children:"Time to TimeCount"})]}),e("div",{className:`create-modal__overlay--${t}`})]}),document.getElementById("create-portal-root"))};class H{constructor(){y(this,"segmentState","active");y(this,"description");y(this,"childNumber")}}const V=({isOpen:n,onClose:t,doughnutSegmentChildNumber:o,doughnutSegmentDescription:l})=>{const[a,i]=h.exports.useState(!1),m=h.exports.useRef(null);let d=new H;const g=f=>{f.preventDefault(),setTimeout(()=>{a==!0&&i(!1)},750),t(f)},_=()=>{a==!0&&i(!1),a==!1&&i(!0)},D=async f=>{var r;if(location.reload(),d.description=m.current.value,d.childNumber=o,((r=m.current)==null?void 0:r.value)==="")return window.alert("Looks like you didn't input any data! Try again");S.put(`http://localhost:3001/edit/${o}`,d).then(v=>console.log(v)),setTimeout(()=>_(),750),t(f)},w=async f=>{location.reload(),d.childNumber=o,S.delete(`http://localhost:3001/delete/${o}`).then(r=>console.log(r)),t(f)};return x.createPortal(s(C,{children:[s("div",{className:`view-modal__interface--${n}`,children:[e("button",{className:"view-modal__close-button",onClick:g,children:e(k,{})}),e("h2",{className:"view-modal__title",children:b[o]}),s("form",{className:"view-modal__form-details",children:[e("h3",{className:"view-modal__form-details__form-heading",children:"Let's have a look at your month..."}),e("div",{className:`view-modal__form-details__userinfo--hidden-${a}`,children:e("p",{children:l})}),e("textarea",{className:`view-modal__form-details__textarea--shown-${a}`,defaultValue:l,ref:m})]}),s("div",{className:`view-modal__button-row--edit-engaged-${a}`,children:[e("button",{className:`view-modal__button-row__edit-button--${a}`,onClick:_,children:"Edit"}),e("button",{className:"view-modal__button-row__delete-button",onClick:w,children:"Delete"})]}),e("div",{className:`view-modal__button-row--save-engaged-${a}`,children:e("button",{className:`view-modal__button-row__edit-button--${a}`,onClick:D,children:"Save Changes"})})]}),e("div",{className:`view-modal__overlay--${n}`})]}),document.getElementById("edit-portal-root"))},j=({childNumber:n,status:t,description:o,closeSegmentFunction:l})=>{const[a,i]=h.exports.useState(!1),[m,d]=h.exports.useState(!1),g=()=>{t=="inactive"&&i(!0),t=="active"&&d(!0)},_=()=>{l(),d(!1),i(!1)};return s("div",{children:[e("div",{className:`doughnut-container__doughnut__doughnut-segment__heading-${n}`,children:e("h6",{className:`doughnut-container__doughnut__doughnut-segment__heading--h6-${n}`,children:b[n]})}),e("div",{onClick:g,className:`doughnut-container__doughnut__doughnut-segment__${n}--${t}`,id:`doughnut-segment--${t}`}),e(I,{isOpen:a,doughnutSegmentChildNumber:n,onClose:_}),e(V,{isOpen:m,doughnutSegmentChildNumber:n,doughnutSegmentDescription:o,onClose:_})]})},b={1:"January",2:"Feburary",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December",13:"ERROR: MONTHNAME NOT FOUND"},W=()=>{const[n,t]=h.exports.useState(),[o,l]=h.exports.useState(""),[a,i]=h.exports.useState(""),[m,d]=h.exports.useState(!1),[g,_]=h.exports.useState([{}]);async function D(){return console.log("Sending req - let's get this bread"),S.get("http://localhost:3001")}function w(r){if(r.length!==12){let c=[...r];for(let u=1;u<12+1;u++){c.sort(({childNumber:p},{childNumber:N})=>p-N);const E={segmentState:"inactive",description:"",childNumber:u,_id:`inactive-segment-number${u}`};if(c[u-1]===void 0){c.push(E),c.sort(({childNumber:p},{childNumber:N})=>p-N);continue}if(c[u-1].childNumber!==u){c.push(E),c.sort(({childNumber:p},{childNumber:N})=>p-N);continue}if(c[u-1].childNumber===u){c.sort(({childNumber:p},{childNumber:N})=>p-N);continue}}return i("inactive"),_([{hmmm:"how did you get in here?"}]),l("Fill in your year!"),c}return i("active"),_(r.sort(({childNumber:c},{childNumber:u})=>c-u)),l("Check out your year!"),r}const f=async()=>{l("Loading your data"),t(void 0),setTimeout(async()=>{let r=await D().catch(u=>console.log(u)),v=[...r==null?void 0:r.data],c=w(v);t(c),console.log("Response received")},500)};return h.exports.useEffect(()=>{(async()=>{i("inactive"),l("Loading your data");let v=await D();setTimeout(()=>{let c=[...v==null?void 0:v.data],u=w(c);t(u)},500)})()},[]),s("div",{className:"doughnut-container",children:[e("button",{className:`doughnut-container__heading--${a}`,onClick:()=>d(!0),children:o}),s("div",{className:"doughnut-container__doughnut",children:[e("div",{className:"doughnut-container__doughnut__doughnut-hole"}),s("div",{id:"Guidelines",children:[e("div",{className:"doughnut-container_doughnut_guide-line--1"}),e("div",{className:"doughnut-container_doughnut_guide-line--2"}),e("div",{className:"doughnut-container_doughnut_guide-line--3"}),e("div",{className:"doughnut-container_doughnut_guide-line--4"}),e("div",{className:"doughnut-container_doughnut_guide-line--5"}),e("div",{className:"doughnut-container_doughnut_guide-line--6"}),e("div",{className:"doughnut-container_doughnut_guide-line--7"}),e("div",{className:"doughnut-container_doughnut_guide-line--8"}),e("div",{className:"doughnut-container_doughnut_guide-line--9"}),e("div",{className:"doughnut-container_doughnut_guide-line--10"}),e("div",{className:"doughnut-container_doughnut_guide-line--11"}),e("div",{className:"doughnut-container_doughnut_guide-line--12"})]}),e("div",{id:"doughnutSegmentContainer",children:n!==void 0?n==null?void 0:n.map(r=>e(j,{childNumber:r.childNumber,status:r.segmentState,description:r.description,closeSegmentFunction:()=>{console.log("Bubble up recieved. Calling new data..."),f()}},r._id)):e(C,{children:e("div",{className:"doughnut-container__loading-container",children:e("div",{className:"doughnut-container__loading-container__icon"})})})})]}),e(L,{isOpen:m,onClose:()=>{d(!1)},allData:g})]})},q=()=>s("main",{children:[e("div",{className:"app-column"}),s("div",{className:"app-background",children:[e("h1",{className:"app-heading",children:"Year of the Donut"}),e(W,{})]}),e("div",{className:"app-column"})]});R.createRoot(document.getElementById("root")).render(e(O.StrictMode,{children:e(q,{})}));
